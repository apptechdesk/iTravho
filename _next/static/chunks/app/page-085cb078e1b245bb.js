(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{33792:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var a=s(95155),r=s(12115),l=s(92138),n=s(37129),o=s(37073),i=s(34540),c=s(35695),d=s(49694),u=s(69092),m=s(98928);let h=e=>{let{}=e;(0,o.u)({blockIfAuthenticated:!0});let t=(0,i.wA)(),s=(0,c.useRouter)(),[h,x]=(0,r.useState)(!1),[p,g]=(0,r.useState)(""),[f,b]=(0,r.useState)(!1),[y,j]=(0,r.useState)(!1),v=(0,d.Wx)({initialValues:{username:"",password:""},validationSchema:n.Ik({username:n.Yj().required("Please enter your username"),password:n.Yj().required("Please enter your password")}),onSubmit:async e=>{x(!0),g("");try{let a=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){let e=await a.json();throw Error(e.error||"Login failed")}let r=await a.json();t((0,u.gV)(r)),"Admin"===r.roles?s.push("/dashboard"):"Agent"===r.roles?s.push("/agent"):s.push("/dashboard")}catch(e){g(e.message)}finally{x(!1)}}});return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"grid items-center min-h-screen",children:(0,a.jsxs)("div",{className:"w-full max-w-md mx-auto bg-white rounded-3xl shadow-lg p-8 text-center space-y-6",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(m.O,{})}),(0,a.jsx)("h1",{className:"text-xl font-Kanit !font-semibold !mb-5",children:"Sign in with Smartfly Account"}),(0,a.jsxs)("form",{onSubmit:v.handleSubmit,className:"space-y-4 text-left",children:[(0,a.jsxs)("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:[(0,a.jsx)("input",{type:"text",name:"username",placeholder:"Email or Phone Number",value:v.values.username,onChange:v.handleChange,onBlur:v.handleBlur,className:"input-group !mb-0 w-full px-4 py-2 text-sm outline-none",required:!0}),(0,a.jsx)("div",{className:"border-t border-gray-300"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:f?"text":"password",name:"password",placeholder:"Password",value:v.values.password,onChange:v.handleChange,onBlur:v.handleBlur,className:"input-group !mb-0 w-full px-4 py-2 text-sm outline-none",required:!0}),(0,a.jsx)("button",{type:"submit",className:"p-2 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors !mr-2","aria-label":"Submit",children:(0,a.jsx)(l.A,{size:20})})]})]}),p&&(0,a.jsx)("div",{className:"text-red-600 text-sm text-center",children:p}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 mt-2 py-10",children:[(0,a.jsx)("input",{type:"checkbox",id:"keepSignedIn",checked:y,onChange:e=>j(e.target.checked),className:"form-checkbox !mr-2"}),(0,a.jsx)("label",{htmlFor:"keepSignedIn",className:"text-sm",children:"Keep me signed in"})]}),(0,a.jsxs)("div",{className:"text-sm text-center text-blue-600 space-y-1 mt-2",children:[(0,a.jsx)("a",{href:"#",className:"block hover:underline",children:"Forgotten your password?"}),(0,a.jsx)("a",{href:"#",className:"block hover:underline",children:"Create Smartfly Account"})]})]})]})}),(0,a.jsx)("footer",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2",children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("p",{className:"mb-0 text-muted",children:["\xa9 ",new Date().getFullYear()," Powered by Travho"]})})})]})}},37073:(e,t,s)=>{"use strict";s.d(t,{u:()=>l});var a=s(12115),r=s(35695);function l(e){let{protect:t=!1,blockIfAuthenticated:s=!1,redirectTo:l="/user/login",redirectIfAuthenticatedTo:n="/dashboard"}=e,o=(0,r.useRouter)();(0,a.useEffect)(()=>{let e=localStorage.getItem("userDetails");t&&!e&&o.replace(l),s&&e&&o.replace(n)},[t,s,l,n,o])}},69092:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>i,gV:()=>n,lM:()=>o});var a=s(51990);let r={userDetails:(()=>{{let e=localStorage.getItem("userDetails");if(e)try{return JSON.parse(e)}catch(e){console.error("Failed to parse userDetails from localStorage",e)}}return null})()},l=(0,a.Z0)({name:"user",initialState:r,reducers:{setUser:(e,t)=>{e.userDetails=t.payload,t.payload?localStorage.setItem("userDetails",JSON.stringify(t.payload)):localStorage.removeItem("userDetails")},clearUser:e=>{e.userDetails=null,document.cookie="access_token=; Max-Age=0; path=/; secure; SameSite=Strict",document.cookie="refresh_token=; Max-Age=0; path=/; secure; SameSite=Strict"}}}),{setUser:n,clearUser:o}=l.actions,i=l.reducer},69473:(e,t,s)=>{Promise.resolve().then(s.bind(s,33792))},98928:(e,t,s)=>{"use strict";s.d(t,{O:()=>r});var a=s(95155);s(12115);let r=e=>{let{size:t=120,text:s="Smartfly"}=e,r=t/2-10,l=Array.from({length:60}).map((e,t)=>{let s=t/60*2*Math.PI,l=r*Math.cos(s),n=r*Math.sin(s);return(0,a.jsx)("div",{className:"absolute w-1.5 h-1.5 rounded-full",style:{backgroundColor:"hsl(".concat(t/60*360,", 100%, 60%)"),transform:"translate(".concat(l,"px, ").concat(n,"px)")}},t)});return(0,a.jsxs)("div",{className:"relative flex items-center justify-center",style:{width:t,height:t},children:[l,(0,a.jsx)("span",{className:"absolute text-black font-semibold text-lg",children:s})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[635,117,441,684,358],()=>t(69473)),_N_E=e.O()}]);