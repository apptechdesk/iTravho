(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{24999:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var r=a(95155),s=a(12115),l=a(34303);let n=(0,s.forwardRef)((e,t)=>{let{children:a,addClass:s,btnType:n="button",...o}=e;return(0,r.jsx)(l.Ay,{ref:t,htmlType:n,className:"btn ".concat(s||""),...o,children:a})});n.displayName="CustomButton";let o=n},34980:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ee});var r=a(95155),s=a(12115),l=a(52856),n=a(30832),o=a.n(n),i=a(40178),d=a.n(i),c=a(27611),u=a.n(c),m=a(11025),x=a(37073),h=a(61922);let f=function(e){let{tabs:t,activeTab:a,onTabChange:s}=e;return(0,r.jsx)("div",{className:"tab_Sec_box",children:(0,r.jsx)("div",{className:"tab_Sec flex gap-[0_30px]",children:t.map((e,t)=>(0,r.jsx)(h.A,{children:(0,r.jsx)("div",{className:"tab_menu ".concat(a===t?"active":""),onClick:()=>s(t,e),children:"".concat(null==e?void 0:e.label," (").concat(null==e?void 0:e.count,")")})},t))})})};var p=a(68534),Y=a(19591),j=a(66673);let b=()=>(0,r.jsxs)("svg",{width:"45",height:"45",viewBox:"0 0 53 53",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("rect",{width:"53",height:"53",rx:"26.5",fill:"#014EFF"}),(0,r.jsx)("path",{d:"M28.4165 24.5835H16.9165",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M24.5832 28.4165H16.9165",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M20.7498 32.25H16.9165",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M32.2498 20.75H16.9165",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M33.2085 24.5835V34.1668M33.2085 34.1668L36.0835 31.2918M33.2085 34.1668L30.3335 31.2918",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),D=(e,t)=>{var a;return null==(a=(null==t?void 0:t.filter(t=>(null==t?void 0:t.value)===e))[0])?void 0:a.label},y=e=>{let{sortOptions:t}=e,[a,l]=(0,s.useState)(null!==e.value&&void 0!==e.value?D(e.value,t):"SortBy"),[n,o]=(0,s.useState)(null),i=!!n,d=(t,a)=>{e.handleSortBy(t,a),l(t),o(null)};return(0,s.useEffect)(()=>{null!==e.value&&void 0!==e.value?l(D(e.value,t)):l("asc")},[e.value,t]),(0,r.jsxs)("div",{className:"sort-by-block",children:[(0,r.jsx)(p.A,{className:"!w-[35px] !p-0",id:"sortby-button","aria-controls":i?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":i?"true":void 0,onClick:e=>{o(e.currentTarget)},disabled:e.isDisabled,children:(0,r.jsx)(b,{})}),(0,r.jsx)(Y.A,{className:"custom-sort",id:"sortby-menu",anchorEl:n,open:i,onClose:()=>o(null),MenuListProps:{"aria-labelledby":"basic-button"},children:t.map((e,t)=>(0,r.jsx)(j.A,{onClick:()=>d(e.label,null==e?void 0:e.value),children:e.label},e.value))})]})};var M=a(32111),g=a(65095);let{RangePicker:v}=M.A,w=e=>{let{tabs:t,selectedDateKey:a,onSelect:l,onDateChange:n}=e,[i,d]=(0,s.useState)(!1);return(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 px-4 py-2 flex items-center justify-between shadow-sm",children:[(0,r.jsx)("div",{className:"flex flex-1 justify-between text-sm font-medium text-primary",children:t.map(e=>(0,r.jsx)("button",{onClick:()=>l(e.dateKey),className:"relative px-2 py-1 cursor-pointer",children:(0,r.jsxs)("span",{className:"".concat(a===e.dateKey?"underline underline-offset-[6px] font-semibold":""),children:[e.label," (",e.count,")"]})},e.dateKey))}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{onClick:()=>d(e=>!e),className:"ml-2 hover:text-primary cursor-pointer","aria-label":"Select Date Range",children:(0,r.jsx)(g.A,{})}),i&&(0,r.jsx)("div",{className:"absolute right-0 mt-2 z-50 bg-white shadow-lg rounded",children:(0,r.jsx)(v,{open:!0,onChange:(e,t)=>{if(Array.isArray(t)&&t[0]&&t[1]&&n){let[e,a]=t;n("".concat(o()(e).format("DD-MMM-YYYY")," - ").concat(o()(a).format("DD-MMM-YYYY")),e,a)}d(!1)},onOpenChange:e=>!e&&d(!1),getPopupContainer:e=>e.parentElement,allowClear:!1,inputReadOnly:!0,style:{width:0,height:0,padding:0,border:"none"},popupStyle:{marginTop:8}})})]})]})};var N=a(57161),k=a(84868),S=a(34303),A=a(85292),C=a(31511),L=a(61037),_=a(40579),B=a(24073),K=a(66766);let O=e=>{let{trip:t,onActionSelect:a}=e,s=(0,r.jsx)(N.A,{onClick:e=>{let{key:r}=e;return a(t.tid,r)},items:[{key:"create-quote",label:"Create Quote",icon:(0,r.jsx)(A.A,{})},{key:"mark-invalid",label:"Mark Invalid",icon:(0,r.jsx)(C.A,{})},{key:"mark-directbook",label:"Mark DirectBook",icon:(0,r.jsx)(L.A,{})},{key:"focal-scope",label:"Focal Scope",icon:(0,r.jsx)(_.A,{})}]});return(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl shadow-sm",children:[(0,r.jsxs)("div",{className:"text-center w-16 text-xs font-semibold text-pri",children:[(0,r.jsx)("div",{children:"TID"}),(0,r.jsx)("div",{className:"text-xs",children:t.tid})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,r.jsx)("div",{className:"p-1",children:(0,r.jsx)(K.default,{src:t.airlineLogo||"https://placehold.co/80x80/png",alt:"airline-logo",className:"w-10 h-10 object-contain rounded-lg",width:40,height:40})}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"text-xs font-semibold",children:t.name}),(0,r.jsxs)("span",{className:"text-xs font-medium gap-2",children:[(0,r.jsx)(B.A,{className:"mr-1 text-sm text-gray-700"}),t.route]})]})]}),(0,r.jsx)(k.A,{overlay:s,trigger:["click"],children:(0,r.jsx)(S.Ay,{type:"text",icon:(0,r.jsx)(g.A,{})})})]})},E=e=>{let{trips:t,onAction:a}=e;return(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:t.map(e=>(0,r.jsx)(O,{trip:e,onActionSelect:a},e.tid))})};var I=a(24999),T=a(35695),H=a(26386),R=a(82788),P=a(62098),F=a(8414),W=a(23562),q=a(14186),G=a(4516),U=a(82940),z=a.n(U);let X=()=>{let e="",t=new Date().getHours();return t>=0&&t<12?"Good morning":12===t?"Good noon":t>12&&t<18?"Good afternoon":t>=18&&t<22?"Good evening":"Hello"},Q=()=>{let[e,t]=(0,s.useState)(null);return(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("https://ipapi.co/json"),{city:a,country:r,latitude:s,longitude:l}=await e.json(),n=await fetch("https://api.openweathermap.org/data/2.5/weather?lat=".concat(s,"&lon=").concat(l,"&appid=aaedc7db3ba3690c06ef2d05f9e37c65&units=metric")),o=await n.json(),i={city:a,country:r,temperature:o.main.temp,condition:o.weather[0].main};t(i)}catch(e){console.error("Failed to load location or weather",e)}})()},[]),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 sm:gap-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:X()}),e&&(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-700 space-x-3",children:[(0,r.jsxs)("div",{className:"item-list flex items-center gap-2",children:[(0,r.jsx)(W.A,{className:"w-5 h-5 text-gray-600"}),(0,r.jsx)("span",{children:z()().format("DD MMM YYYY")})]}),(0,r.jsxs)("div",{className:"item-list flex items-center gap-2",children:[(0,r.jsx)(q.A,{className:"w-5 h-5 text-gray-600"}),(0,r.jsx)("span",{children:z()().format("hh:mm A")})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(G.A,{className:"w-4 h-4 text-gray-600"}),(0,r.jsxs)("span",{children:[e.city,", ",e.country]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(e=>{switch(e.toLowerCase()){case"rain":return(0,r.jsx)(H.A,{className:"w-5 h-5 text-blue-500"});case"snow":return(0,r.jsx)(R.A,{className:"w-5 h-5 text-cyan-400"});case"clear":default:return(0,r.jsx)(P.A,{className:"w-5 h-5 text-yellow-400"});case"clouds":return(0,r.jsx)(F.A,{className:"w-5 h-5 text-gray-400"})}})(e.condition),(0,r.jsxs)("span",{children:[e.temperature.toFixed(0),"\xb0C, ",e.condition]})]})]})]})},{Search:V}=l.A;o().extend(d()),o().extend(u());let J=[{label:"New",count:25},{label:"Approved",count:3},{label:"Failed",count:3},{label:"Pending",count:5},{label:"Completed",count:50}],Z=[{tid:8432,name:"Mr Ron Weasley",route:"Copenhagen(CPH) → Singapore(SIN)",date:o()().format("YYYY-MM-DD")},{tid:9883,name:"Mr Sirius Black",route:"Singapore(SIN) ↔ Dubai(DXB)",date:o()().add(1,"day").format("YYYY-MM-DD")},{tid:4363,name:"Mr Draco Malfoy",route:"Chennai(MAA) → Singapore(SIN)",date:o()().add(2,"day").format("YYYY-MM-DD")},{tid:7544,name:"Mrs Hermione Granger",route:"Singapore(SIN) ↔ Dubai(DXB)",date:o()().add(3,"day").format("YYYY-MM-DD")},{tid:1025,name:"Mr Albus Dumbledore",route:"Singapore(SIN) → AbuDhabi(AUH)",date:o()().add(4,"day").format("YYYY-MM-DD")}],$=[{label:"Sort by Name",value:"name"},{label:"Sort by Date",value:"created_at"}],ee=()=>{(0,x.u)({protect:!0});let e=(0,T.useRouter)(),t=o()(),a=t.add(5,"day"),l=(e,t)=>Z.flat().filter(a=>{let r=o()(a.date);return r.isSameOrAfter(e,"day")&&r.isSameOrBefore(t,"day")}).length,n=[{label:"Today",count:l(t.format("YYYY-MM-DD"),t.format("YYYY-MM-DD")),dateKey:"today",startDate:t.format("YYYY-MM-DD"),endDate:t.format("YYYY-MM-DD")},{label:"Tomorrow",count:l(t.add(1,"day").format("YYYY-MM-DD"),t.add(1,"day").format("YYYY-MM-DD")),dateKey:"tomorrow",startDate:t.add(1,"day").format("YYYY-MM-DD"),endDate:t.add(1,"day").format("YYYY-MM-DD")},{label:"".concat(t.format("DD-MMM-YYYY")," - ").concat(a.format("DD-MMM-YYYY")),count:l(t.format("YYYY-MM-DD"),a.format("YYYY-MM-DD")),dateKey:"".concat(t.format("YYYY-MM-DD"),"_to_").concat(a.format("YYYY-MM-DD")),startDate:t.format("YYYY-MM-DD"),endDate:a.format("YYYY-MM-DD")}],[i,d]=(0,s.useState)(0),[c,u]=(0,s.useState)(null),[h,p]=(0,s.useState)(J),[Y,j]=(0,s.useState)(n),[b,D]=(0,s.useState)("today"),[M,g]=(0,s.useState)(""),[v,N]=(0,s.useState)([]);(0,s.useEffect)(()=>{var e,a;let r=Y.find(e=>e.dateKey===b);if(!r)return;let s=null!=(e=r.startDate)?e:t.format("YYYY-MM-DD"),l=null!=(a=r.endDate)?a:s;N(Z.filter(e=>{let t=o()(e.date);return t.isSameOrAfter(s,"day")&&t.isSameOrBefore(l,"day")}))},[b,Y]);let k=e=>{var a,r;g(e);let s=Y.find(e=>e.dateKey===b);if(!s)return;let l=null!=(a=s.startDate)?a:t.format("YYYY-MM-DD"),n=null!=(r=s.endDate)?r:l,i=Z.filter(e=>{let t=o()(e.date);return t.isSameOrAfter(l,"day")&&t.isSameOrBefore(n,"day")});if(e.trim()){let t=e.toLowerCase();i=i.filter(e=>e.tid.toString().includes(t)||e.name.toLowerCase().includes(t))}N(i)};return(0,r.jsx)(m.A,{children:(0,r.jsxs)("section",{className:"inner-section",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-5",children:[(0,r.jsx)(Q,{}),(0,r.jsx)(I.A,{addClass:"primary",onClick:()=>e.push("/booking/new-requests/"),children:"+ Create New Request"})]}),(0,r.jsxs)("div",{className:"tab-section space-y-4 flex justify-between items-center",children:[(0,r.jsx)(f,{tabs:h,activeTab:i,onTabChange:e=>{d(e)}}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)(y,{sortOptions:$,value:c,handleSortBy:(e,t)=>{u(null!=t?t:null)},isDisabled:!1}),(0,r.jsx)("div",{className:"input-group !mb-0 w-full md:max-w-md",children:(0,r.jsx)(V,{size:"large",placeholder:"Search by Name or TID",allowClear:!0,value:M,onChange:e=>k(e.target.value)})})]})]}),(0,r.jsx)(w,{tabs:Y,selectedDateKey:b,onSelect:e=>{D(e),g("")},onDateChange:(e,t,a)=>{let r="".concat(t,"_to_").concat(a),s=l(t,a),n="".concat(o()(t).format("DD-MMM-YYYY")," - ").concat(o()(a).format("DD-MMM-YYYY")," ");j([...Y.filter(e=>"today"===e.dateKey||"tomorrow"===e.dateKey),{label:n,count:s,dateKey:r,startDate:t,endDate:a}]),D(r)}}),(0,r.jsx)("div",{className:"mt-5",children:(0,r.jsx)(E,{trips:v,onAction:(t,a)=>{let r=v.flat().find(e=>e.tid===t);if(r)if("mark-directbook"===a){let t=new URLSearchParams({tid:r.tid.toString(),name:r.name,route:r.route}).toString();e.push("/booking/direct-booking/?".concat(t))}else if("create-quote"===a){let t=new URLSearchParams({tid:r.tid.toString(),name:r.name,route:r.route}).toString();e.push("/create-quote/?".concat(t))}else alert("TID ".concat(t,": ").concat(a))}})})]})})}},37073:(e,t,a)=>{"use strict";a.d(t,{u:()=>l});var r=a(12115),s=a(35695);function l(e){let{protect:t=!1,blockIfAuthenticated:a=!1,redirectTo:l="/user/login",redirectIfAuthenticatedTo:n="/dashboard"}=e,o=(0,s.useRouter)();(0,r.useEffect)(()=>{let e=localStorage.getItem("userDetails");t&&!e&&o.replace(l),a&&e&&o.replace(n)},[t,a,l,n,o])}},70738:(e,t,a)=>{Promise.resolve().then(a.bind(a,34980))}},e=>{var t=t=>e(e.s=t);e.O(0,[153,586,63,635,486,262,303,200,591,534,357,25,441,684,358],()=>t(70738)),_N_E=e.O()}]);