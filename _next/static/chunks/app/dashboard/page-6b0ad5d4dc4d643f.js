(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{15691:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>F});var r=a(95155),l=a(12115),s=a(52856),n=a(30832),o=a.n(n),i=a(40178),d=a.n(i),c=a(27611),u=a.n(c),m=a(57946),Y=a(37073),x=a(20331);let h=function(e){let{tabs:t,activeTab:a,onTabChange:l}=e;return(0,r.jsx)("div",{className:"tab_Sec_box",children:(0,r.jsx)("div",{className:"tab_Sec flex gap-[0_30px]",children:t.map((e,t)=>(0,r.jsx)(x.A,{children:(0,r.jsx)("div",{className:"tab_menu ".concat(a===t?"active":""),onClick:()=>l(t,e),children:"".concat(null==e?void 0:e.label," (").concat(null==e?void 0:e.count,")")})},t))})})};var f=a(68534),p=a(73769),D=a(66673);let b=()=>(0,r.jsxs)("svg",{width:"45",height:"45",viewBox:"0 0 53 53",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("rect",{width:"53",height:"53",rx:"26.5",fill:"#014EFF"}),(0,r.jsx)("path",{d:"M28.4165 24.5835H16.9165",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M24.5832 28.4165H16.9165",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M20.7498 32.25H16.9165",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M32.2498 20.75H16.9165",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M33.2085 24.5835V34.1668M33.2085 34.1668L36.0835 31.2918M33.2085 34.1668L30.3335 31.2918",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),M=(e,t)=>{var a;return null==(a=(null==t?void 0:t.filter(t=>(null==t?void 0:t.value)===e))[0])?void 0:a.label},j=e=>{let{sortOptions:t}=e,[a,s]=(0,l.useState)(null!==e.value&&void 0!==e.value?M(e.value,t):"SortBy"),[n,o]=(0,l.useState)(null),i=!!n,d=(t,a)=>{e.handleSortBy(t,a),s(t),o(null)};return(0,l.useEffect)(()=>{null!==e.value&&void 0!==e.value?s(M(e.value,t)):s("asc")},[e.value,t]),(0,r.jsxs)("div",{className:"sort-by-block",children:[(0,r.jsx)(f.A,{className:"!w-[35px] !p-0",id:"sortby-button","aria-controls":i?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":i?"true":void 0,onClick:e=>{o(e.currentTarget)},disabled:e.isDisabled,children:(0,r.jsx)(b,{})}),(0,r.jsx)(p.A,{className:"custom-sort",id:"sortby-menu",anchorEl:n,open:i,onClose:()=>o(null),MenuListProps:{"aria-labelledby":"basic-button"},children:t.map((e,t)=>(0,r.jsx)(D.A,{onClick:()=>d(e.label,null==e?void 0:e.value),children:e.label},e.value))})]})};var v=a(32111),y=a(65095);let{RangePicker:g}=v.A,k=e=>{let{tabs:t,selectedDateKey:a,onSelect:s,onDateChange:n}=e,[i,d]=(0,l.useState)(!1);return(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 px-4 py-2 flex items-center justify-between shadow-sm",children:[(0,r.jsx)("div",{className:"flex flex-1 justify-between text-sm font-medium text-primary",children:t.map(e=>(0,r.jsx)("button",{onClick:()=>s(e.dateKey),className:"relative px-2 py-1 cursor-pointer",children:(0,r.jsxs)("span",{className:"".concat(a===e.dateKey?"underline underline-offset-[6px] font-semibold":""),children:[e.label," (",e.count,")"]})},e.dateKey))}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{onClick:()=>d(e=>!e),className:"ml-2 hover:text-primary cursor-pointer","aria-label":"Select Date Range",children:(0,r.jsx)(y.A,{})}),i&&(0,r.jsx)("div",{className:"absolute right-0 mt-2 z-50 bg-white shadow-lg rounded",children:(0,r.jsx)(g,{open:!0,onChange:(e,t)=>{if(Array.isArray(t)&&t[0]&&t[1]&&n){let[e,a]=t;n("".concat(o()(e).format("DD-MMM-YYYY")," - ").concat(o()(a).format("DD-MMM-YYYY")),e,a)}d(!1)},onOpenChange:e=>!e&&d(!1),getPopupContainer:e=>e.parentElement,allowClear:!1,inputReadOnly:!0,style:{width:0,height:0,padding:0,border:"none"},popupStyle:{marginTop:8}})})]})]})};var S=a(57161),N=a(84868),w=a(34303),A=a(85292),C=a(31511),L=a(61037),_=a(40579),B=a(24073),K=a(66766);let O=e=>{let{trip:t,onActionSelect:a}=e,l=(0,r.jsx)(S.A,{onClick:e=>{let{key:r}=e;return a(t.tid,r)},items:[{key:"create-quote",label:"Create Quote",icon:(0,r.jsx)(A.A,{})},{key:"mark-invalid",label:"Mark Invalid",icon:(0,r.jsx)(C.A,{})},{key:"mark-directbook",label:"Mark DirectBook",icon:(0,r.jsx)(L.A,{})},{key:"focal-scope",label:"Focal Scope",icon:(0,r.jsx)(_.A,{})}]});return(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl shadow-sm",children:[(0,r.jsxs)("div",{className:"text-center w-16 text-xs font-semibold text-pri",children:[(0,r.jsx)("div",{children:"TID"}),(0,r.jsx)("div",{className:"text-xs",children:t.tid})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,r.jsx)("div",{className:"p-1",children:(0,r.jsx)(K.default,{src:t.airlineLogo||"https://placehold.co/80x80/png",alt:"airline-logo",className:"w-10 h-10 object-contain rounded-lg",width:40,height:40})}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"text-xs font-semibold",children:t.name}),(0,r.jsxs)("span",{className:"text-xs font-medium gap-2",children:[(0,r.jsx)(B.A,{className:"mr-1 text-sm text-gray-700"}),t.route]})]})]}),(0,r.jsx)(N.A,{overlay:l,trigger:["click"],children:(0,r.jsx)(w.Ay,{type:"text",icon:(0,r.jsx)(y.A,{})})})]})},I=e=>{let{trips:t,onAction:a}=e;return(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:t.map(e=>(0,r.jsx)(O,{trip:e,onActionSelect:a},e.tid))})};var T=a(24999),E=a(35695);let{Search:R}=s.A;o().extend(d()),o().extend(u());let H=[{label:"New",count:25},{label:"Approved",count:3},{label:"Failed",count:3},{label:"Pending",count:5},{label:"Completed",count:50}],P=[{tid:8432,name:"Mr Ron Weasley",route:"Copenhagen(CPH) → Singapore(SIN)",date:o()().format("YYYY-MM-DD")},{tid:9883,name:"Mr Sirius Black",route:"Singapore(SIN) ↔ Dubai(DXB)",date:o()().add(1,"day").format("YYYY-MM-DD")},{tid:4363,name:"Mr Draco Malfoy",route:"Chennai(MAA) → Singapore(SIN)",date:o()().add(2,"day").format("YYYY-MM-DD")},{tid:7544,name:"Mrs Hermione Granger",route:"Singapore(SIN) ↔ Dubai(DXB)",date:o()().add(3,"day").format("YYYY-MM-DD")},{tid:1025,name:"Mr Albus Dumbledore",route:"Singapore(SIN) → AbuDhabi(AUH)",date:o()().add(4,"day").format("YYYY-MM-DD")}],W=[{label:"Sort by Name",value:"name"},{label:"Sort by Date",value:"created_at"}],F=()=>{(0,Y.u)({protect:!0});let e=(0,E.useRouter)(),t=o()(),a=t.add(5,"day"),s=(e,t)=>P.flat().filter(a=>{let r=o()(a.date);return r.isSameOrAfter(e,"day")&&r.isSameOrBefore(t,"day")}).length,n=[{label:"Today",count:s(t.format("YYYY-MM-DD"),t.format("YYYY-MM-DD")),dateKey:"today",startDate:t.format("YYYY-MM-DD"),endDate:t.format("YYYY-MM-DD")},{label:"Tomorrow",count:s(t.add(1,"day").format("YYYY-MM-DD"),t.add(1,"day").format("YYYY-MM-DD")),dateKey:"tomorrow",startDate:t.add(1,"day").format("YYYY-MM-DD"),endDate:t.add(1,"day").format("YYYY-MM-DD")},{label:"".concat(t.format("DD-MMM-YYYY")," - ").concat(a.format("DD-MMM-YYYY")),count:s(t.format("YYYY-MM-DD"),a.format("YYYY-MM-DD")),dateKey:"".concat(t.format("YYYY-MM-DD"),"_to_").concat(a.format("YYYY-MM-DD")),startDate:t.format("YYYY-MM-DD"),endDate:a.format("YYYY-MM-DD")}],[i,d]=(0,l.useState)(0),[c,u]=(0,l.useState)(null),[x,f]=(0,l.useState)(H),[p,D]=(0,l.useState)(n),[b,M]=(0,l.useState)("today"),[v,y]=(0,l.useState)(""),[g,S]=(0,l.useState)([]);(0,l.useEffect)(()=>{var e,a;let r=p.find(e=>e.dateKey===b);if(!r)return;let l=null!=(e=r.startDate)?e:t.format("YYYY-MM-DD"),s=null!=(a=r.endDate)?a:l;S(P.filter(e=>{let t=o()(e.date);return t.isSameOrAfter(l,"day")&&t.isSameOrBefore(s,"day")}))},[b,p]);let N=e=>{var a,r;y(e);let l=p.find(e=>e.dateKey===b);if(!l)return;let s=null!=(a=l.startDate)?a:t.format("YYYY-MM-DD"),n=null!=(r=l.endDate)?r:s,i=P.filter(e=>{let t=o()(e.date);return t.isSameOrAfter(s,"day")&&t.isSameOrBefore(n,"day")});if(e.trim()){let t=e.toLowerCase();i=i.filter(e=>e.tid.toString().includes(t)||e.name.toLowerCase().includes(t))}S(i)};return(0,r.jsx)(m.A,{children:(0,r.jsxs)("section",{className:"inner-section",children:[(0,r.jsx)("div",{className:"grid justify-end mb-5",children:(0,r.jsx)(T.A,{addClass:"primary",onClick:()=>e.push("/booking/new-requests/"),children:"+ Create New Request"})}),(0,r.jsxs)("div",{className:"tab-section space-y-4 flex justify-between items-center",children:[(0,r.jsx)(h,{tabs:x,activeTab:i,onTabChange:e=>{d(e)}}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)(j,{sortOptions:W,value:c,handleSortBy:(e,t)=>{u(null!=t?t:null)},isDisabled:!1}),(0,r.jsx)("div",{className:"input-group !mb-0 w-full md:max-w-md",children:(0,r.jsx)(R,{size:"large",placeholder:"Search by Name or TID",allowClear:!0,value:v,onChange:e=>N(e.target.value)})})]})]}),(0,r.jsx)(k,{tabs:p,selectedDateKey:b,onSelect:e=>{M(e),y("")},onDateChange:(e,t,a)=>{let r="".concat(t,"_to_").concat(a),l=s(t,a),n="".concat(o()(t).format("DD-MMM-YYYY")," - ").concat(o()(a).format("DD-MMM-YYYY")," ");D([...p.filter(e=>"today"===e.dateKey||"tomorrow"===e.dateKey),{label:n,count:l,dateKey:r,startDate:t,endDate:a}]),M(r)}}),(0,r.jsx)("div",{className:"mt-5",children:(0,r.jsx)(I,{trips:g,onAction:(t,a)=>{let r=g.flat().find(e=>e.tid===t);if("mark-directbook"===a&&r){let t=new URLSearchParams({tid:r.tid.toString(),name:r.name,route:r.route}).toString();e.push("/booking/direct-booking/?".concat(t))}else alert("TID ".concat(t,": ").concat(a))}})})]})})}},24999:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var r=a(95155),l=a(12115),s=a(34303);let n=(0,l.forwardRef)((e,t)=>{let{children:a,addClass:l,btnType:n="button",...o}=e;return(0,r.jsx)(s.Ay,{ref:t,htmlType:n,className:"btn ".concat(l||""),...o,children:a})});n.displayName="CustomButton";let o=n},37073:(e,t,a)=>{"use strict";a.d(t,{u:()=>s});var r=a(12115),l=a(35695);function s(e){let{protect:t=!1,blockIfAuthenticated:a=!1,redirectTo:s="/user/login",redirectIfAuthenticatedTo:n="/dashboard"}=e,o=(0,l.useRouter)(),i=(0,l.usePathname)();(0,r.useEffect)(()=>{let e=localStorage.getItem("userDetails");t&&!e&&o.replace(s),a&&e&&o.replace(n)},[i,t,a,s,n,o])}},70738:(e,t,a)=>{Promise.resolve().then(a.bind(a,15691))}},e=>{var t=t=>e(e.s=t);e.O(0,[534,63,635,486,262,303,200,769,110,946,441,684,358],()=>t(70738)),_N_E=e.O()}]);