(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[362],{1615:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>p});var t=r(5155),a=r(2115),l=r(5695),o=r(9694),n=r(7129),i=r(6874),c=r.n(i),d=r(3636),m=r(9600),u=r(9092),h=r(4540),x=r(7073);let p=()=>{(0,x.u)({blockIfAuthenticated:!0});let e=(0,h.wA)(),s=(0,l.useRouter)(),[r,i]=(0,a.useState)(!1),[p,b]=(0,a.useState)(""),[g,w]=(0,a.useState)(!1),j=(0,o.Wx)({initialValues:{email:"",password:""},validationSchema:n.Ik({email:n.Yj().email().required("Please enter your email"),password:n.Yj().required("Please enter your password")}),onSubmit:async r=>{i(!0),b("");try{let t=await (0,d.i)(r);e((0,u.gV)(t)),s.push("/dashboard")}catch(e){var t,a;b((null==e||null==(a=e.response)||null==(t=a.data)?void 0:t.message)||"Login failed")}finally{i(!1)}}});return(0,t.jsx)(m.A,{children:(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b",children:(0,t.jsxs)("div",{className:"max-w-md w-full p-6 bg-white rounded-lg shadow-lg z-50",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Welcome Back!"}),(0,t.jsx)("p",{className:"text-gray-500 mb-6",children:"Sign in to continue to Travho."})]}),p&&(0,t.jsx)("div",{className:"mb-4 text-red-600 text-sm text-center",children:p}),(0,t.jsxs)("form",{onSubmit:j.handleSubmit,children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,t.jsx)("input",{id:"email",name:"email",type:"email",placeholder:"Enter email",className:"mt-1 block w-full px-3 py-2 border ".concat(j.touched.email&&j.errors.email?"border-red-500":"border-gray-300"," rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"),onChange:j.handleChange,onBlur:j.handleBlur,value:j.values.email}),j.touched.email&&j.errors.email&&(0,t.jsx)("p",{className:"text-sm text-red-600 mt-1",children:j.errors.email})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,t.jsx)(c(),{href:"/forgot-password",className:"text-sm text-blue-600 hover:underline",children:"Forgot password?"})]}),(0,t.jsxs)("div",{className:"relative mt-1",children:[(0,t.jsx)("input",{id:"password",name:"password",type:g?"text":"password",placeholder:"Enter password",className:"block w-full px-3 py-2 border ".concat(j.touched.password&&j.errors.password?"border-red-500":"border-gray-300"," rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 pr-10"),onChange:j.handleChange,onBlur:j.handleBlur,value:j.values.password}),(0,t.jsx)("button",{type:"button",className:"absolute right-3 top-2 text-gray-500",onClick:()=>w(!g),children:(0,t.jsx)("i",{className:"ri-eye-fill"})})]}),j.touched.password&&j.errors.password&&(0,t.jsx)("p",{className:"text-sm text-red-600 mt-1",children:j.errors.password})]}),(0,t.jsxs)("div",{className:"mb-4 flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",id:"remember",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,t.jsx)("label",{htmlFor:"remember",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),(0,t.jsxs)("button",{type:"submit",className:"w-full flex justify-center items-center bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:r,children:[r&&(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Sign In"]})]}),(0,t.jsxs)("div",{className:"mt-6 text-center",children:[(0,t.jsx)("h5",{className:"text-sm text-gray-600 mb-3",children:"Sign in with"}),(0,t.jsxs)("div",{className:"flex justify-center space-x-3",children:[(0,t.jsx)(c(),{href:"#",className:"btn btn-primary btn-icon me-1",onClick:e=>{e.preventDefault(),alert("Login with Facebook")},children:(0,t.jsx)("i",{className:"ri-facebook-fill text-white"})}),(0,t.jsx)(c(),{href:"#",className:"btn btn-danger btn-icon me-1",onClick:e=>{e.preventDefault(),alert("Login with Google")},children:(0,t.jsx)("i",{className:"ri-google-fill text-white"})})]})]}),(0,t.jsxs)("p",{className:"mt-6 text-sm text-center text-gray-600",children:["Don't have an account?"," ",(0,t.jsx)(c(),{href:"/register",className:"text-blue-600 font-medium hover:underline",children:"Signup"})]})]})})})}},2671:(e,s,r)=>{Promise.resolve().then(r.bind(r,1615))},3636:(e,s,r)=>{"use strict";r.d(s,{i:()=>n});var t=r(3464),a=r(9509);let l="https://service.emissiondesk.com/api";console.log("baseurl",l),console.log("ENV:",a.env);let o=t.A.create({baseURL:l,headers:{"Content-Type":"application/json",Accept:"*/*"}});o.interceptors.request.use(e=>{var s;return console.log("[Request] ".concat(null==(s=e.method)?void 0:s.toUpperCase()," ").concat(e.url)),e},e=>(console.error("[Request Error]",e),Promise.reject(e))),o.interceptors.response.use(e=>(console.log("[Response] ".concat(e.status,": ").concat(e.config.url),e.data),e),e=>{if(e.response){let{status:s,data:r,config:t}=e.response;switch(console.error("[Response Error] ".concat(s,": ").concat(t.url),r),s){case 400:console.error("Bad Request:",r);break;case 401:console.error("Unauthorized");break;case 500:console.error("Internal Server Error");break;default:console.error("API Error:",r)}}else console.error("Network Error:",e.message);return Promise.reject(e)});let n=async e=>(await o.post("/Authentication",e)).data},7073:(e,s,r)=>{"use strict";r.d(s,{u:()=>l});var t=r(2115),a=r(5695);function l(e){let{protect:s=!1,blockIfAuthenticated:r=!1,redirectTo:l="/user/login",redirectIfAuthenticatedTo:o="/dashboard"}=e,n=(0,a.useRouter)(),i=(0,a.usePathname)();(0,t.useEffect)(()=>{let e=localStorage.getItem("userDetails");s&&!e&&n.replace(l),r&&e&&n.replace(o)},[i,s,r,l,o,n])}},9092:(e,s,r)=>{"use strict";r.d(s,{Ay:()=>o,gV:()=>a,lM:()=>l});let t=(0,r(1990).Z0)({name:"user",initialState:{userDetails:null},reducers:{setUser:(e,s)=>{e.userDetails=s.payload,localStorage.setItem("userDetails",JSON.stringify(s.payload))},clearUser:e=>{e.userDetails=null,localStorage.removeItem("userDetails")}}}),{setUser:a,clearUser:l}=t.actions,o=t.reducer},9600:(e,s,r)=>{"use strict";r.d(s,{A:()=>l});var t=r(5155);r(2115);var a=r(5695);let l=e=>{let{children:s}=e;return(0,a.useRouter)(),(0,t.jsxs)("div",{className:"auth-page-wrapper pt-5",children:[(0,t.jsxs)("div",{className:"auth-one-bg-position auth-one-bg",id:"auth-particles",children:[(0,t.jsx)("div",{className:"bg-overlay"}),(0,t.jsx)("div",{className:"shape",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 1440 120",children:(0,t.jsx)("path",{d:"M 0,36 C 144,53.6 432,123.2 720,124 C 1008,124.8 1296,56.8 1440,40L1440 140L0 140z"})})})]}),s,(0,t.jsx)("footer",{className:"footer start-0",children:(0,t.jsx)("div",{className:"container",children:(0,t.jsx)("div",{className:"row",children:(0,t.jsx)("div",{className:"col-lg-12",children:(0,t.jsx)("div",{className:"text-center",children:(0,t.jsxs)("p",{className:"mb-0 text-muted",children:["\xa9 ",new Date().getFullYear()," Travho. Crafted with"," ",(0,t.jsx)("i",{className:"mdi mdi-heart text-danger"})," by â€‹TechDesk"]})})})})})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[635,486,955,441,684,358],()=>s(2671)),_N_E=e.O()}]);