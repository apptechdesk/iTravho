(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[738],{1401:(e,t,r)=>{Promise.resolve().then(r.bind(r,41720))},24999:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var l=r(95155),a=r(12115),s=r(34303);let i=(0,a.forwardRef)((e,t)=>{let{children:r,addClass:a,btnType:i="button",...n}=e;return(0,l.jsx)(s.Ay,{ref:t,htmlType:i,className:"btn ".concat(a||""),...n,children:r})});i.displayName="CustomButton";let n=i},41720:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>N});var l=r(95155),a=r(12115),s=r(6791),i=r(57340),n=r(69074),o=r(35695);let d=e=>{let{origin:t,destination:r,date:a,passengers:s}=e,d=(0,o.useRouter)();return(0,l.jsxs)("div",{className:" space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsx)("div",{className:"text-xs text-blue-700 font-semibold mb-2 underline underline-offset-4",children:"Create Quote"}),(0,l.jsx)("button",{onClick:()=>d.push("/dashboard/"),className:"text-blue-700 hover:text-blue-900 transition-colors","aria-label":"Go to dashboard",children:(0,l.jsx)(i.A,{size:16})})]}),(0,l.jsx)("div",{className:"h-0.5 bg-gray-100 mb-5"}),(0,l.jsxs)("div",{className:"bg-primary text-white rounded-lg px-6 py-3 flex justify-between items-center text-sm md:text-base shadow-md w-full",children:[(0,l.jsxs)("div",{className:"font-semibold whitespace-nowrap",children:[t," ↔ ",r]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 whitespace-nowrap",children:[(0,l.jsx)(n.A,{className:"h-4 w-4 text-white"}),(0,l.jsx)("span",{children:a})]}),(0,l.jsxs)("div",{className:"whitespace-nowrap",children:[s," Passenger",s>1?"s":""]})]})]})};var c=r(11025),u=r(68534),m=r(66766);let x=e=>{let{airlineLogoUrl:t,airlineName:r,flightType:a,duration:s,departureTime:i,arrivalTime:n,departureAirport:o,arrivalAirport:d,price:c,currency:x="USD",flightRoute:h,brandName:p,onSelect:v}=e;return(0,l.jsxs)("div",{className:"border border-borderColor rounded-xl shadow-sm p-4 bg-white mb-5",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between ",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4 w-1/3",children:[(0,l.jsx)(m.default,{src:t,alt:r,className:"w-12 h-12 rounded-md object-contain",width:80,height:80}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-semibold text-gray-900",children:a}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:s}),(0,l.jsx)("div",{className:"text-sm text-gray-400",children:r})]})]}),(0,l.jsx)("div",{className:"text-center w-1/3",children:(0,l.jsxs)("div",{className:"flex justify-center items-center space-x-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-bold text-lg",children:i}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:o})]}),(0,l.jsx)("div",{className:"w-8 border-t border-gray-400"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-bold text-lg",children:n}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:d})]})]})}),(0,l.jsxs)("div",{className:"flex flex-col items-end w-1/3 space-y-2",children:[(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsxs)("div",{className:"font-semibold text-gray-900 text-lg",children:[x," ",c.toFixed(2)]}),(0,l.jsxs)("div",{className:"text-xs text-gray-500",children:["Price per person ",(0,l.jsx)("br",{}),"(incl. taxes & fees)"]})]}),(0,l.jsx)(u.A,{variant:"contained",color:"error",size:"small",className:"rounded-full",onClick:v,children:"Select"})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("div",{className:"text-xs text-indigo-600 mt-1 p-1 border rounded-sm border-borderColor",children:h}),(0,l.jsx)("div",{className:"text-xs text-indigo-600 mt-1 p-1 border rounded-sm border-borderColor",children:p})]})]})};var h=r(35297),p=r(3127),v=r(81284);let f=e=>{let{details:t}=e;return(0,l.jsx)("div",{className:"border border-borderColor rounded-md p-4 w-full text-sm bg-white shadow-sm",children:(0,l.jsx)("table",{className:"w-full table-auto",children:(0,l.jsx)("tbody",{children:t.map((e,t)=>{let{label:r,value:a,tooltip:s}=e;return(0,l.jsxs)("tr",{className:"border-b border-borderColor last:border-b-0",children:[(0,l.jsxs)("td",{className:"py-2 pr-2 font-medium text-gray-600 flex items-center",children:[r,s&&(0,l.jsx)(h.A,{title:s,arrow:!0,children:(0,l.jsx)(p.A,{size:"small",className:"ml-1",children:(0,l.jsx)(v.A,{size:14})})})]}),(0,l.jsx)("td",{className:"py-2 text-gray-900",children:a})]},t)})})})})},g=e=>{let{options:t,selected:r,onChange:a}=e;return(0,l.jsx)("div",{className:"flex justify-between items-center border border-borderColor rounded-lg overflow-hidden shadow-sm bg-white",children:t.map(e=>(0,l.jsxs)("button",{onClick:()=>a(e.value),className:"flex items-center justify-center relative flex-1 cursor-pointer py-3 text-sm font-medium transition-colors ".concat(r===e.value?"text-blue-600":"text-gray-800"),children:[(0,l.jsx)("span",{children:e.label}),e.tooltip&&(0,l.jsx)(h.A,{title:e.tooltip,arrow:!0,children:(0,l.jsx)(p.A,{size:"small",className:"ml-1",children:(0,l.jsx)(v.A,{size:16})})}),r===e.value&&(0,l.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-blue-600"})]},e.value))})};var b=r(24999);let j=[{label:"Best",value:"best",tooltip:"We look at the price, travel time, number of stops and baggage allowance to determine which options you might like best."},{label:"Cheapest",value:"cheapest",tooltip:"Low price"},{label:"Fastest",value:"fastest",tooltip:"Quick time"}],N=()=>{var e;let[t,r]=(0,a.useState)("best"),[i,n]=(0,a.useState)([]),[o,u]=(0,a.useState)(""),[m,h]=(0,a.useState)(!0),[p,v]=(0,a.useState)(1);(0,a.useEffect)(()=>{v(1)},[t]);let N=(0,a.useMemo)(()=>(function(e,t){switch(t){case"cheapest":return[...e].sort((e,t)=>e.price-t.price);case"fastest":{let t=Math.min(...e.map(e=>{let t=e.flightType.match(/\d+/);return t?parseInt(t[0]):0}));return[...e.filter(e=>{let r=e.flightType.match(/\d+/);return(r?parseInt(r[0]):0)===t})].sort((e,t)=>e.totalDuration-t.totalDuration)}default:return[...e].sort((e,t)=>e.price+e.totalDuration/60-(t.price+t.totalDuration/60))}})(i,t),[i,t]),y=N.slice(0,5*p),w=N.length>y.length;return(0,a.useEffect)(()=>{(async()=>{h(!0),u("");try{var e,t,r;let l=await fetch("/api/travelport/catalog",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({CatalogProductOfferingsQueryRequest:{CatalogProductOfferingsRequest:{"@type":"CatalogProductOfferingsRequestAir",maxNumberOfUpsellsToReturn:5,offersPerPage:20,contentSourceList:["1G"],PassengerCriteria:[{number:1,passengerTypeCode:"ADT"}],SearchCriteriaFlight:[{departureDate:"2025-06-28",From:{value:"CPH"},To:{value:"BLR"}}],SearchModifiersAir:{CarrierPreference:[{preferenceType:"Preferred",carriers:[]}]}}}})});if(!l.ok)throw Error(await l.text());let a=await l.json(),s=(null==a||null==(t=a.CatalogProductOfferingsResponse)||null==(e=t.CatalogProductOfferings)?void 0:e.CatalogProductOffering)||[],i=(null==a||null==(r=a.CatalogProductOfferingsResponse)?void 0:r.ReferenceList)||[],o=new Map,d=new Map;i.forEach(e=>{"ReferenceListFlight"===e["@type"]&&(e.Flight||[]).forEach(e=>o.set(e.id,e)),"ReferenceListBrand"===e["@type"]&&(e.Brand||[]).forEach(e=>d.set(e.id,e))});let c=s.flatMap(e=>e.ProductBrandOptions.flatMap(t=>t.ProductBrandOffering.map((r,l)=>{var a,s,i,n,c,u,m,x,h,p,v,f,g,b,j,N,y;let w=r.BestCombinablePrice||{},A=null==(a=r.Brand)?void 0:a.BrandRef,C=d.get(A),T=t.flightRefs.map(e=>o.get(e)).filter(Boolean),P=T.reduce((e,t)=>e+function(e){var t,r;let l=e.match(/(\d+)H(?:([0-9]+)M)?/i),a=parseInt(null!=(t=null==l?void 0:l[1])?t:"0"),s=parseInt(null!=(r=null==l?void 0:l[2])?r:"0");return isNaN(a)&&isNaN(s)?0:60*a+s}((null==t?void 0:t.duration)||""),0),S=T.map(e=>{var t;return null==(t=e.Departure)?void 0:t.location}).join(" → ")+" → "+(null==(i=T[T.length-1])||null==(s=i.Arrival)?void 0:s.location),R=Math.max(0,T.length-1);return{id:"".concat(e.id,"-").concat(A,"-").concat(l),airlineName:(null==(n=T[0])?void 0:n.carrier)||"Unknown Airline",airlineLogoUrl:"https://content.r9cdn.net/rimg/provider-logos/airlines/v/".concat((null==(c=T[0])?void 0:c.carrier)||"XX",".png"),flightType:0===R?"Non stop":1===R?"1 stop":"".concat(R," stops"),duration:"".concat(Math.floor(P/60),"h").concat(P%60,"m"),totalDuration:P,flightRoute:S,departureTime:(null==(m=T[0])||null==(u=m.Departure)?void 0:u.time)||"",arrivalTime:(null==(h=T[T.length-1])||null==(x=h.Arrival)?void 0:x.time)||"",departureAirport:(null==(v=T[0])||null==(p=v.Departure)?void 0:p.location)||e.Departure,arrivalAirport:(null==(g=T[T.length-1])||null==(f=g.Arrival)?void 0:f.location)||e.Arrival,price:w.TotalPrice||0,currency:(null==(b=w.CurrencyCode)?void 0:b.value)||"USD",baggage:(null==C||null==(N=C.BrandAttribute)||null==(j=N.find(e=>"CheckedBag"===e.classification))?void 0:j.inclusion)||"N/A",brandName:(null==C?void 0:C.name)||"",brandImage:(null==C||null==(y=C.ImageURL)?void 0:y[0])||"",fareBreakdown:[{type:"Base Fare",amount:w.Base||0},{type:"Taxes & Fees",amount:w.TotalTaxes||0}]}})));n(c)}catch(e){u(e instanceof Error?e.message:"Unknown error")}finally{h(!1)}})()},[]),null==(e=j.find(e=>e.value===t))||e.tooltip,(0,l.jsx)(c.A,{children:(0,l.jsxs)("div",{className:"p-4 space-y-5",children:[(0,l.jsx)(d,{origin:"CPH",destination:"BLR",date:"28-JUNE-2025",passengers:1}),(0,l.jsx)(g,{options:j,selected:t,onChange:r}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-5 space-y-5 ",children:[(0,l.jsx)("div",{id:"scrollableDiv",className:"max-h-[500px] overflow-y-auto",children:(0,l.jsx)(s.A,{dataLength:y.length,next:()=>v(e=>e+1),hasMore:w,scrollableTarget:"scrollableDiv",loader:(0,l.jsx)("p",{className:"text-sm",children:"Loading more flights..."}),children:0===y.length?(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"No flights available."}):y.map(e=>(0,l.jsx)(x,{airlineLogoUrl:e.airlineLogoUrl,airlineName:e.airlineName,flightType:e.flightType,duration:e.duration,departureTime:e.departureTime,arrivalTime:e.arrivalTime,departureAirport:e.departureAirport,arrivalAirport:e.arrivalAirport,price:e.price,currency:e.currency,flightRoute:e.flightRoute,brandName:e.brandName,onSelect:()=>alert("Selected flight on ".concat(e.departureTime))},e.id))})}),(0,l.jsx)("div",{children:(0,l.jsx)(f,{details:[{label:"NAME",value:"John Doe"},{label:"RANK",value:"1"},{label:"SEAMAN BOOK NO",value:"Z9876543"},{label:"PASSPORT",value:"A1234567"},{label:"ISSUED DATE",value:"01-01-2000"},{label:"EXPIRY DATE",value:"01-01-2030"},{label:"ISSUED AT",value:"BENGALURU"},{label:"NATIONALITY",value:"INDIAN"},{label:"DOB",value:"01-02-1995"},{label:"BAGGAGE",value:"30Kg"}]})})]}),(0,l.jsx)("div",{className:"h-0.5 bg-gray-200 mb-5"}),(0,l.jsxs)("div",{className:"grid gap-5 [grid-template-columns:repeat(auto-fit,minmax(140px,1fr))] max-w-sm mx-auto",children:[(0,l.jsx)(b.A,{addClass:"primary w-full",onClick:()=>console.log("Preview Quote"),children:"Preview Quote"}),(0,l.jsx)(b.A,{addClass:"primary w-full",onClick:()=>console.log("Send Quote"),children:"Send Quote"})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[5534,3063,635,3486,5262,4303,8534,3198,1025,8441,1684,7358],()=>t(1401)),_N_E=e.O()}]);