(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{29600:(e,s,r)=>{"use strict";r.d(s,{A:()=>l});var t=r(95155);r(12115);var a=r(35695);let l=e=>{let{children:s}=e;return(0,a.useRouter)(),(0,t.jsxs)("div",{className:"auth-page-wrapper pt-5",children:[(0,t.jsxs)("div",{className:"auth-one-bg-position auth-one-bg",id:"auth-particles",children:[(0,t.jsx)("div",{className:"bg-overlay"}),(0,t.jsx)("div",{className:"shape",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 1440 120",children:(0,t.jsx)("path",{d:"M 0,36 C 144,53.6 432,123.2 720,124 C 1008,124.8 1296,56.8 1440,40L1440 140L0 140z"})})})]}),s,(0,t.jsx)("footer",{className:"footer start-0",children:(0,t.jsx)("div",{className:"container",children:(0,t.jsx)("div",{className:"row",children:(0,t.jsx)("div",{className:"col-lg-12",children:(0,t.jsx)("div",{className:"text-center",children:(0,t.jsxs)("p",{className:"mb-0 text-muted",children:["\xa9 ",new Date().getFullYear()," Travho. Crafted with"," ",(0,t.jsx)("i",{className:"mdi mdi-heart text-danger"})," by â€‹TechDesk"]})})})})})})]})}},37073:(e,s,r)=>{"use strict";r.d(s,{u:()=>l});var t=r(12115),a=r(35695);function l(e){let{protect:s=!1,blockIfAuthenticated:r=!1,redirectTo:l="/user/login",redirectIfAuthenticatedTo:o="/dashboard"}=e,n=(0,a.useRouter)(),c=(0,a.usePathname)();(0,t.useEffect)(()=>{let e=localStorage.getItem("userDetails");s&&!e&&n.replace(l),r&&e&&n.replace(o)},[c,s,r,l,o,n])}},50125:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>f});var t=r(95155),a=r(12115),l=r(35695),o=r(49694),n=r(37129),c=r(6874),i=r.n(c),d=r(57383),u=r(29159),m=r(23464),h=r(49509);let x="https://cors-anywhere.herokuapp.com/https://smartflyservices.travho.net/api";console.log("baseurl",x),console.log("ENV:",h.env);let p=m.A.create({baseURL:x,headers:{"Content-Type":"application/json",Accept:"*/*"}});p.interceptors.request.use(e=>{var s;return console.log("[Request] ".concat(null==(s=e.method)?void 0:s.toUpperCase()," ").concat(e.url)),e},e=>(console.error("[Request Error]",e),Promise.reject(e))),p.interceptors.response.use(e=>(console.log("[Response] ".concat(e.status,": ").concat(e.config.url),e.data),e),e=>{if(e.response){let{status:s,data:r,config:t}=e.response;switch(console.error("[Response Error] ".concat(s,": ").concat(t.url),r),s){case 400:console.error("Bad Request:",r);break;case 401:console.error("Unauthorized");break;case 500:console.error("Internal Server Error");break;default:console.error("API Error:",r)}}else console.error("Network Error:",e.message);return Promise.reject(e)});let b=async e=>(await p.post("/UserAuth/login",e)).data;var g=r(69092),w=r(34540),j=r(37073),v=r(29600);let f=()=>{(0,j.u)({blockIfAuthenticated:!0});let e=(0,w.wA)(),s=(0,l.useRouter)(),[r,c]=(0,a.useState)(!1),[m,h]=(0,a.useState)(""),[x,p]=(0,a.useState)(!1),f=(0,o.Wx)({initialValues:{username:"",password:""},validationSchema:n.Ik({username:n.Yj().required("Please enter your username"),password:n.Yj().required("Please enter your password")}),onSubmit:async r=>{c(!0),h("");try{let t=await b(r),a=(0,u.s)(t.token),l=a["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"]||r.username;d.A.set("authToken",t.token,{expires:new Date(t.expires),secure:!0,sameSite:"Strict"}),e((0,g.gV)({username:l}));let o=1e3*a.exp-Date.now();o>0&&setTimeout(()=>{d.A.remove("authToken"),e((0,g.gV)(null)),s.push("/login")},o),s.push("/dashboard")}catch(e){var t,a;h((null==e||null==(a=e.response)||null==(t=a.data)?void 0:t.message)||"Login failed")}finally{c(!1)}}});return(0,t.jsx)(v.A,{children:(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b",children:(0,t.jsxs)("div",{className:"max-w-md w-full p-6 bg-white rounded-lg shadow-lg z-50",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Welcome Back!"}),(0,t.jsx)("p",{className:"text-gray-500 mb-6",children:"Sign in to continue to Travho."})]}),m&&(0,t.jsx)("div",{className:"mb-4 text-red-600 text-sm text-center",children:m}),(0,t.jsxs)("form",{onSubmit:f.handleSubmit,children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),(0,t.jsx)("input",{id:"username",name:"username",type:"text",placeholder:"Enter username",className:"mt-1 block w-full px-3 py-2 border ".concat(f.touched.username&&f.errors.username?"border-red-500":"border-gray-300"," rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"),onChange:f.handleChange,onBlur:f.handleBlur,value:f.values.username}),f.touched.username&&f.errors.username&&(0,t.jsx)("p",{className:"text-sm text-red-600 mt-1",children:f.errors.username})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,t.jsx)(i(),{href:"/forgot-password",className:"text-sm text-blue-600 hover:underline",children:"Forgot password?"})]}),(0,t.jsxs)("div",{className:"relative mt-1",children:[(0,t.jsx)("input",{id:"password",name:"password",type:x?"text":"password",placeholder:"Enter password",className:"block w-full px-3 py-2 border ".concat(f.touched.password&&f.errors.password?"border-red-500":"border-gray-300"," rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 pr-10"),onChange:f.handleChange,onBlur:f.handleBlur,value:f.values.password}),(0,t.jsx)("button",{type:"button",className:"absolute right-3 top-2 text-gray-500",onClick:()=>p(!x),children:(0,t.jsx)("i",{className:"ri-eye-fill"})})]}),f.touched.password&&f.errors.password&&(0,t.jsx)("p",{className:"text-sm text-red-600 mt-1",children:f.errors.password})]}),(0,t.jsxs)("div",{className:"mb-4 flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",id:"remember",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,t.jsx)("label",{htmlFor:"remember",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),(0,t.jsxs)("button",{type:"submit",className:"w-full flex justify-center items-center bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:r,children:[r&&(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Sign In"]})]}),(0,t.jsxs)("div",{className:"mt-6 text-center",children:[(0,t.jsx)("h5",{className:"text-sm text-gray-600 mb-3",children:"Sign in with"}),(0,t.jsxs)("div",{className:"flex justify-center space-x-3",children:[(0,t.jsx)(i(),{href:"#",onClick:e=>e.preventDefault(),children:(0,t.jsx)("i",{className:"ri-facebook-fill text-blue-600 text-xl"})}),(0,t.jsx)(i(),{href:"#",onClick:e=>e.preventDefault(),children:(0,t.jsx)("i",{className:"ri-google-fill text-red-500 text-xl"})})]})]}),(0,t.jsxs)("p",{className:"mt-6 text-sm text-center text-gray-600",children:["Don't have an account?"," ",(0,t.jsx)(i(),{href:"/register",className:"text-blue-600 font-medium hover:underline",children:"Signup"})]})]})})})}},69092:(e,s,r)=>{"use strict";r.d(s,{Ay:()=>o,gV:()=>a,lM:()=>l});let t=(0,r(51990).Z0)({name:"user",initialState:{userDetails:null},reducers:{setUser:(e,s)=>{e.userDetails=s.payload,localStorage.setItem("userDetails",JSON.stringify(s.payload))},clearUser:e=>{e.userDetails=null,localStorage.removeItem("userDetails")}}}),{setUser:a,clearUser:l}=t.actions,o=t.reducer},69473:(e,s,r)=>{Promise.resolve().then(r.bind(r,50125))}},e=>{var s=s=>e(e.s=s);e.O(0,[635,486,508,314,441,684,358],()=>s(69473)),_N_E=e.O()}]);