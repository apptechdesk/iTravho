(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5362],{29600:(e,s,r)=>{"use strict";r.d(s,{A:()=>l});var t=r(95155);r(12115);var a=r(35695);let l=e=>{let{children:s}=e;return(0,a.useRouter)(),(0,t.jsxs)("div",{className:"auth-page-wrapper pt-5",children:[(0,t.jsxs)("div",{className:"auth-one-bg-position auth-one-bg",id:"auth-particles",children:[(0,t.jsx)("div",{className:"bg-overlay"}),(0,t.jsx)("div",{className:"shape",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 1440 120",children:(0,t.jsx)("path",{d:"M 0,36 C 144,53.6 432,123.2 720,124 C 1008,124.8 1296,56.8 1440,40L1440 140L0 140z"})})})]}),s,(0,t.jsx)("footer",{className:"footer start-0",children:(0,t.jsx)("div",{className:"container",children:(0,t.jsx)("div",{className:"row",children:(0,t.jsx)("div",{className:"col-lg-12",children:(0,t.jsx)("div",{className:"text-center",children:(0,t.jsxs)("p",{className:"mb-0 text-muted",children:["\xa9 ",new Date().getFullYear()," Travho. Crafted with"," ",(0,t.jsx)("i",{className:"mdi mdi-heart text-danger"})," by â€‹TechDesk"]})})})})})})]})}},37073:(e,s,r)=>{"use strict";r.d(s,{u:()=>l});var t=r(12115),a=r(35695);function l(e){let{protect:s=!1,blockIfAuthenticated:r=!1,redirectTo:l="/user/login",redirectIfAuthenticatedTo:n="/dashboard"}=e,o=(0,a.useRouter)();(0,t.useEffect)(()=>{let e=localStorage.getItem("userDetails");s&&!e&&o.replace(l),r&&e&&o.replace(n)},[s,r,l,n,o])}},43996:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>x});var t=r(95155),a=r(12115),l=r(35695),n=r(49694),o=r(37129),i=r(6874),c=r.n(i),d=r(69092),m=r(34540),u=r(37073),h=r(29600);let x=()=>{(0,u.u)({blockIfAuthenticated:!0});let e=(0,m.wA)(),s=(0,l.useRouter)(),[r,i]=(0,a.useState)(!1),[x,p]=(0,a.useState)(""),[b,g]=(0,a.useState)(!1),j=(0,n.Wx)({initialValues:{username:"",password:""},validationSchema:o.Ik({username:o.Yj().required("Please enter your username"),password:o.Yj().required("Please enter your password")}),onSubmit:async r=>{i(!0),p("");try{let t=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!t.ok){let e=await t.json();throw Error(e.error||"Login failed")}let a=await t.json();e((0,d.gV)(a)),"Admin"===a.roles?s.push("/dashboard"):"Agent"===a.roles?s.push("/agent"):s.push("/dashboard")}catch(e){p(e.message)}finally{i(!1)}}});return(0,t.jsx)(h.A,{children:(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b",children:(0,t.jsxs)("div",{className:"max-w-md w-full p-6 bg-white rounded-lg shadow-lg z-50",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Welcome Back!"}),(0,t.jsx)("p",{className:"text-gray-500 mb-6",children:"Sign in to continue to Travho."})]}),x&&(0,t.jsx)("div",{className:"mb-4 text-red-600 text-sm text-center",children:x}),(0,t.jsxs)("form",{onSubmit:j.handleSubmit,children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),(0,t.jsx)("input",{id:"username",name:"username",type:"text",placeholder:"Enter username",className:"mt-1 block w-full px-3 py-2 border ".concat(j.touched.username&&j.errors.username?"border-red-500":"border-gray-300"," rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"),onChange:j.handleChange,onBlur:j.handleBlur,value:j.values.username}),j.touched.username&&j.errors.username&&(0,t.jsx)("p",{className:"text-sm text-red-600 mt-1",children:j.errors.username})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,t.jsx)(c(),{href:"/forgot-password",className:"text-sm text-blue-600 hover:underline",children:"Forgot password?"})]}),(0,t.jsxs)("div",{className:"relative mt-1",children:[(0,t.jsx)("input",{id:"password",name:"password",type:b?"text":"password",placeholder:"Enter password",className:"block w-full px-3 py-2 border ".concat(j.touched.password&&j.errors.password?"border-red-500":"border-gray-300"," rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 pr-10"),onChange:j.handleChange,onBlur:j.handleBlur,value:j.values.password}),(0,t.jsx)("button",{type:"button",className:"absolute right-3 top-2 text-gray-500",onClick:()=>g(!b),children:(0,t.jsx)("i",{className:"ri-eye-fill"})})]}),j.touched.password&&j.errors.password&&(0,t.jsx)("p",{className:"text-sm text-red-600 mt-1",children:j.errors.password})]}),(0,t.jsxs)("div",{className:"mb-4 flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",id:"remember",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,t.jsx)("label",{htmlFor:"remember",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),(0,t.jsxs)("button",{type:"submit",className:"w-full flex justify-center items-center bg-blue-600 hover:bg-blue-700 !text-white py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:r,children:[r&&(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-2 !text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Sign In"]})]}),(0,t.jsxs)("div",{className:"mt-6 text-center",children:[(0,t.jsx)("h5",{className:"text-sm text-gray-600 mb-3",children:"Sign in with"}),(0,t.jsxs)("div",{className:"flex justify-center space-x-3",children:[(0,t.jsx)(c(),{href:"#",onClick:e=>e.preventDefault(),children:(0,t.jsx)("i",{className:"ri-facebook-fill text-blue-600 text-xl"})}),(0,t.jsx)(c(),{href:"#",onClick:e=>e.preventDefault(),children:(0,t.jsx)("i",{className:"ri-google-fill text-red-500 text-xl"})})]})]}),(0,t.jsxs)("p",{className:"mt-6 text-sm text-center text-gray-600",children:["Don't have an account?"," ",(0,t.jsx)(c(),{href:"/register",className:"text-blue-600 font-medium hover:underline",children:"Signup"})]})]})})})}},69092:(e,s,r)=>{"use strict";r.d(s,{Ay:()=>i,gV:()=>n,lM:()=>o});var t=r(51990);let a={userDetails:(()=>{{let e=localStorage.getItem("userDetails");if(e)try{return JSON.parse(e)}catch(e){console.error("Failed to parse userDetails from localStorage",e)}}return null})()},l=(0,t.Z0)({name:"user",initialState:a,reducers:{setUser:(e,s)=>{e.userDetails=s.payload,s.payload?localStorage.setItem("userDetails",JSON.stringify(s.payload)):localStorage.removeItem("userDetails")},clearUser:e=>{e.userDetails=null,localStorage.removeItem("userDetails")}}}),{setUser:n,clearUser:o}=l.actions,i=l.reducer},72671:(e,s,r)=>{Promise.resolve().then(r.bind(r,43996))}},e=>{var s=s=>e(e.s=s);e.O(0,[635,3486,7931,8441,1684,7358],()=>s(72671)),_N_E=e.O()}]);