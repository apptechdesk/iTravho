(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{24999:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(95155),s=a(12115),l=a(34303);let o=(0,s.forwardRef)((e,t)=>{let{children:a,addClass:s,btnType:o="button",...n}=e;return(0,r.jsx)(l.Ay,{ref:t,htmlType:o,className:"btn ".concat(s||""),...n,children:a})});o.displayName="CustomButton";let n=o},34980:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ee});var r=a(95155),s=a(12115),l=a(52856),o=a(30832),n=a.n(o),i=a(40178),d=a.n(i),c=a(27611),u=a.n(c),m=a(11025),h=a(37073),x=a(61922);let p=function(e){let{tabs:t,activeTab:a,onTabChange:s}=e;return(0,r.jsx)("div",{className:"tab_Sec_box",children:(0,r.jsx)("div",{className:"tab_Sec flex gap-[0_30px]",children:t.map((e,t)=>(0,r.jsx)(x.A,{children:(0,r.jsx)("div",{className:"tab_menu ".concat(a===t?"active":""),onClick:()=>s(t,e),children:"".concat(null==e?void 0:e.label," (").concat(null==e?void 0:e.count,")")})},t))})})};var f=a(68534),Y=a(19591),b=a(66673);let v=()=>(0,r.jsxs)("svg",{width:"45",height:"45",viewBox:"0 0 53 53",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("rect",{width:"53",height:"53",rx:"26.5",fill:"#014EFF"}),(0,r.jsx)("path",{d:"M28.4165 24.5835H16.9165",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M24.5832 28.4165H16.9165",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M20.7498 32.25H16.9165",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M32.2498 20.75H16.9165",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M33.2085 24.5835V34.1668M33.2085 34.1668L36.0835 31.2918M33.2085 34.1668L30.3335 31.2918",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),j=(e,t)=>{var a;return null==(a=(null==t?void 0:t.filter(t=>(null==t?void 0:t.value)===e))[0])?void 0:a.label},g=e=>{let{sortOptions:t}=e,[a,l]=(0,s.useState)(null!==e.value&&void 0!==e.value?j(e.value,t):"SortBy"),[o,n]=(0,s.useState)(null),i=!!o,d=(t,a)=>{e.handleSortBy(t,a),l(t),n(null)};return(0,s.useEffect)(()=>{null!==e.value&&void 0!==e.value?l(j(e.value,t)):l("asc")},[e.value,t]),(0,r.jsxs)("div",{className:"sort-by-block",children:[(0,r.jsx)(f.A,{className:"!w-[35px] !p-0",id:"sortby-button","aria-controls":i?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":i?"true":void 0,onClick:e=>{n(e.currentTarget)},disabled:e.isDisabled,children:(0,r.jsx)(v,{})}),(0,r.jsx)(Y.A,{className:"custom-sort",id:"sortby-menu",anchorEl:o,open:i,onClose:()=>n(null),MenuListProps:{"aria-labelledby":"basic-button"},children:t.map((e,t)=>(0,r.jsx)(b.A,{onClick:()=>d(e.label,null==e?void 0:e.value),children:e.label},e.value))})]})};var D=a(32111),y=a(65095);let{RangePicker:M}=D.A,S=e=>{let{tabs:t,selectedDateKey:a,onSelect:l,onDateChange:o}=e,[i,d]=(0,s.useState)(!1);return(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 px-4 py-2 flex items-center justify-between shadow-sm",children:[(0,r.jsx)("div",{className:"flex flex-1 justify-between text-sm font-medium text-primary",children:t.map(e=>(0,r.jsx)("button",{onClick:()=>l(e.dateKey),className:"relative px-2 py-1 cursor-pointer",children:(0,r.jsxs)("span",{className:"".concat(a===e.dateKey?"underline underline-offset-[6px] font-semibold":""),children:[e.label," (",e.count,")"]})},e.dateKey))}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{onClick:()=>d(e=>!e),className:"ml-2 hover:text-primary cursor-pointer","aria-label":"Select Date Range",children:(0,r.jsx)(y.A,{})}),i&&(0,r.jsx)("div",{className:"absolute right-0 mt-2 z-50 bg-white shadow-lg rounded",children:(0,r.jsx)(M,{open:!0,onChange:(e,t)=>{if(Array.isArray(t)&&t[0]&&t[1]&&o){let[e,a]=t;o("".concat(n()(e).format("DD-MMM-YYYY")," - ").concat(n()(a).format("DD-MMM-YYYY")),e,a)}d(!1)},onOpenChange:e=>!e&&d(!1),getPopupContainer:e=>e.parentElement,allowClear:!1,inputReadOnly:!0,style:{width:0,height:0,padding:0,border:"none"},popupStyle:{marginTop:8}})})]})]})};var w=a(57161),N=a(84868),k=a(34303),C=a(85292),A=a(31511),T=a(61037),q=a(40579),F=a(24073),I=a(66766);let L=e=>{let{trip:t,onActionSelect:a}=e,s=(0,r.jsx)(w.A,{onClick:e=>{let{key:r}=e;return a(t.tid,r)},items:[{key:"create-quote",label:"Create Quote",icon:(0,r.jsx)(C.A,{})},{key:"mark-invalid",label:"Mark Invalid",icon:(0,r.jsx)(A.A,{})},{key:"mark-directbook",label:"Mark DirectBook",icon:(0,r.jsx)(T.A,{})},{key:"focal-scope",label:"Focal Scope",icon:(0,r.jsx)(q.A,{})}]});return(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl shadow-sm",children:[(0,r.jsxs)("div",{className:"text-center w-16 text-xs font-semibold text-pri",children:[(0,r.jsx)("div",{children:"TID"}),(0,r.jsx)("div",{className:"text-xs",children:t.tid})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,r.jsx)("div",{className:"p-1",children:(0,r.jsx)(I.default,{src:t.airlineLogo||"https://placehold.co/80x80/png",alt:"airline-logo",className:"w-10 h-10 object-contain rounded-lg",width:40,height:40})}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"text-xs font-semibold",children:t.name}),(0,r.jsxs)("span",{className:"text-xs font-medium gap-2",children:[(0,r.jsx)(F.A,{className:"mr-1 text-sm text-gray-700"}),t.route]})]})]}),(0,r.jsx)(N.A,{overlay:s,trigger:["click"],children:(0,r.jsx)(k.Ay,{type:"text",icon:(0,r.jsx)(y.A,{})})})]})},O=e=>{let{trips:t,onAction:a}=e;return(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:t.map(e=>(0,r.jsx)(L,{trip:e,onActionSelect:a},e.tid))})};var _=a(24999),B=a(35695),R=a(26386),H=a(82788),E=a(62098),K=a(8414),P=a(23562),W=a(14186),G=a(4516),U=a(82940),X=a.n(U);let z=()=>{let e="",t=new Date().getHours();return t>=0&&t<12?"Good morning":12===t?"Good noon":t>12&&t<18?"Good afternoon":t>=18&&t<22?"Good evening":"Hello"},Q=()=>{let[e,t]=(0,s.useState)(null);return(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("https://ipapi.co/json"),{city:a,country:r,latitude:s,longitude:l}=await e.json(),o=await fetch("https://api.openweathermap.org/data/2.5/weather?lat=".concat(s,"&lon=").concat(l,"&appid=aaedc7db3ba3690c06ef2d05f9e37c65&units=metric")),n=await o.json(),i={city:a,country:r,temperature:n.main.temp,condition:n.weather[0].main};t(i)}catch(e){console.error("Failed to load location or weather",e)}})()},[]),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 sm:gap-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:z()}),e&&(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-700 space-x-3",children:[(0,r.jsxs)("div",{className:"item-list flex items-center gap-2",children:[(0,r.jsx)(P.A,{className:"w-5 h-5 text-gray-600"}),(0,r.jsx)("span",{children:X()().format("DD MMM YYYY")})]}),(0,r.jsxs)("div",{className:"item-list flex items-center gap-2",children:[(0,r.jsx)(W.A,{className:"w-5 h-5 text-gray-600"}),(0,r.jsx)("span",{children:X()().format("hh:mm A")})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(G.A,{className:"w-4 h-4 text-gray-600"}),(0,r.jsxs)("span",{children:[e.city,", ",e.country]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(e=>{switch(e.toLowerCase()){case"rain":return(0,r.jsx)(R.A,{className:"w-5 h-5 text-blue-500"});case"snow":return(0,r.jsx)(H.A,{className:"w-5 h-5 text-cyan-400"});case"clear":default:return(0,r.jsx)(E.A,{className:"w-5 h-5 text-yellow-400"});case"clouds":return(0,r.jsx)(K.A,{className:"w-5 h-5 text-gray-400"})}})(e.condition),(0,r.jsxs)("span",{children:[e.temperature.toFixed(0),"\xb0C, ",e.condition]})]})]})]})},{Search:V}=l.A;n().extend(d()),n().extend(u());let J=[{label:"New",count:25},{label:"Approved",count:3},{label:"Failed",count:3},{label:"Pending",count:5},{label:"Completed",count:50}],Z=[{tid:8432,name:"Mr Ron Weasley",route:"Copenhagen(CPH) → Singapore(SIN)",date:n()().format("YYYY-MM-DD"),requestDate:n()().subtract(1,"day").hour(10).minute(15).second(0).toISOString(),requestType:"Flight",requestsubject:"Ticket Request",clientName:"Weasley Corp",travelFrom:"Copenhagen",travelTo:"Singapore",travelFromCode:"CPH",travelToCode:"SIN"},{tid:9883,name:"Mr Sirius Black",route:"Singapore(SIN) ↔ Dubai(DXB)",date:n()().add(1,"day").format("YYYY-MM-DD"),requestDate:n()().subtract(1,"day").hour(11).minute(0).second(0).toISOString(),requestType:"Flight",requestsubject:"Ticket Request",clientName:"Black Holdings",travelFrom:"Singapore",travelTo:"Dubai",travelFromCode:"SIN",travelToCode:"DXB"},{tid:4363,name:"Mr Draco Malfoy",route:"Chennai(MAA) → Singapore(SIN)",date:n()().add(2,"day").format("YYYY-MM-DD"),requestDate:n()().subtract(1,"day").hour(12).minute(30).second(0).toISOString(),requestType:"Flight",requestsubject:"Ticket Request",clientName:"Malfoy Enterprises",travelFrom:"Chennai",travelTo:"Singapore",travelFromCode:"MAA",travelToCode:"SIN"},{tid:7544,name:"Mrs Hermione Granger",route:"Singapore(SIN) ↔ Dubai(DXB)",date:n()().add(3,"day").format("YYYY-MM-DD"),requestDate:n()().subtract(1,"day").hour(13).minute(45).second(0).toISOString(),requestType:"Flight",requestsubject:"Ticket Request",clientName:"Granger Ltd",travelFrom:"Singapore",travelTo:"Dubai",travelFromCode:"SIN",travelToCode:"DXB"},{tid:1025,name:"Mr Albus Dumbledore",route:"Singapore(SIN) → AbuDhabi(AUH)",date:n()().add(4,"day").format("YYYY-MM-DD"),requestDate:n()().subtract(1,"day").hour(14).minute(0).second(0).toISOString(),requestType:"Flight",requestsubject:"Ticket Request",clientName:"Hogwarts Inc",travelFrom:"Singapore",travelTo:"AbuDhabi",travelFromCode:"SIN",travelToCode:"AUH"}],$=[{label:"Sort by Name",value:"name"},{label:"Sort by Date",value:"created_at"}],ee=()=>{(0,h.u)({protect:!0});let e=(0,B.useRouter)(),t=n()(),a=t.add(5,"day"),l=(e,t)=>Z.flat().filter(a=>{let r=n()(a.date);return r.isSameOrAfter(e,"day")&&r.isSameOrBefore(t,"day")}).length,o=[{label:"Today",count:l(t.format("YYYY-MM-DD"),t.format("YYYY-MM-DD")),dateKey:"today",startDate:t.format("YYYY-MM-DD"),endDate:t.format("YYYY-MM-DD")},{label:"Tomorrow",count:l(t.add(1,"day").format("YYYY-MM-DD"),t.add(1,"day").format("YYYY-MM-DD")),dateKey:"tomorrow",startDate:t.add(1,"day").format("YYYY-MM-DD"),endDate:t.add(1,"day").format("YYYY-MM-DD")},{label:"".concat(t.format("DD-MMM-YYYY")," - ").concat(a.format("DD-MMM-YYYY")),count:l(t.format("YYYY-MM-DD"),a.format("YYYY-MM-DD")),dateKey:"".concat(t.format("YYYY-MM-DD"),"_to_").concat(a.format("YYYY-MM-DD")),startDate:t.format("YYYY-MM-DD"),endDate:a.format("YYYY-MM-DD")}],[i,d]=(0,s.useState)(0),[c,u]=(0,s.useState)(null),[x,f]=(0,s.useState)(J),[Y,b]=(0,s.useState)(o),[v,j]=(0,s.useState)("today"),[D,y]=(0,s.useState)(""),[M,w]=(0,s.useState)([]);(0,s.useEffect)(()=>{var e,a;let r=Y.find(e=>e.dateKey===v);if(!r)return;let s=null!=(e=r.startDate)?e:t.format("YYYY-MM-DD"),l=null!=(a=r.endDate)?a:s;w(Z.filter(e=>{let t=n()(e.date);return t.isSameOrAfter(s,"day")&&t.isSameOrBefore(l,"day")}))},[v,Y]);let N=e=>{var a,r;y(e);let s=Y.find(e=>e.dateKey===v);if(!s)return;let l=null!=(a=s.startDate)?a:t.format("YYYY-MM-DD"),o=null!=(r=s.endDate)?r:l,i=Z.filter(e=>{let t=n()(e.date);return t.isSameOrAfter(l,"day")&&t.isSameOrBefore(o,"day")});if(e.trim()){let t=e.toLowerCase();i=i.filter(e=>e.tid.toString().includes(t)||e.name.toLowerCase().includes(t))}w(i)};return(0,r.jsx)(m.A,{children:(0,r.jsxs)("section",{className:"inner-section",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-5",children:[(0,r.jsx)(Q,{}),(0,r.jsx)(_.A,{addClass:"primary",onClick:()=>e.push("/booking/new-requests/"),children:"+ Create New Request"})]}),(0,r.jsxs)("div",{className:"tab-section space-y-4 flex justify-between items-center",children:[(0,r.jsx)(p,{tabs:x,activeTab:i,onTabChange:e=>{d(e)}}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)(g,{sortOptions:$,value:c,handleSortBy:(e,t)=>{u(null!=t?t:null)},isDisabled:!1}),(0,r.jsx)("div",{className:"input-group !mb-0 w-full md:max-w-md",children:(0,r.jsx)(V,{size:"large",placeholder:"Search by Name or TID",allowClear:!0,value:D,onChange:e=>N(e.target.value)})})]})]}),(0,r.jsx)(S,{tabs:Y,selectedDateKey:v,onSelect:e=>{j(e),y("")},onDateChange:(e,t,a)=>{let r="".concat(t,"_to_").concat(a),s=l(t,a),o="".concat(n()(t).format("DD-MMM-YYYY")," - ").concat(n()(a).format("DD-MMM-YYYY")," ");b([...Y.filter(e=>"today"===e.dateKey||"tomorrow"===e.dateKey),{label:o,count:s,dateKey:r,startDate:t,endDate:a}]),j(r)}}),(0,r.jsx)("div",{className:"mt-5",children:(0,r.jsx)(O,{trips:M,onAction:(t,a)=>{let r=M.flat().find(e=>e.tid===t);if(r)if("mark-directbook"===a){let t=new URLSearchParams({tid:r.tid.toString(),name:r.name,route:r.route}).toString();e.push("/booking/direct-booking/?".concat(t))}else if("create-quote"===a){let t=new URLSearchParams({tid:r.tid.toString(),name:r.name,route:r.route,date:r.date,travelFromCode:r.travelFromCode,travelToCode:r.travelToCode}).toString();e.push("/create-quote/?".concat(t))}else alert("TID ".concat(t,": ").concat(a))}})})]})})}},37073:(e,t,a)=>{"use strict";a.d(t,{u:()=>l});var r=a(12115),s=a(35695);function l(e){let{protect:t=!1,blockIfAuthenticated:a=!1,redirectTo:l="/user/login",redirectIfAuthenticatedTo:o="/dashboard"}=e,n=(0,s.useRouter)();(0,r.useEffect)(()=>{let e=localStorage.getItem("userDetails");t&&!e&&n.replace(l),a&&e&&n.replace(o)},[t,a,l,o,n])}},70738:(e,t,a)=>{Promise.resolve().then(a.bind(a,34980))}},e=>{var t=t=>e(e.s=t);e.O(0,[5534,586,3063,635,3486,5262,4303,7200,9591,8534,4357,1025,8441,1684,7358],()=>t(70738)),_N_E=e.O()}]);