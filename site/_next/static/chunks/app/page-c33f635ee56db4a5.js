(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{29600:(e,r,t)=>{"use strict";t.d(r,{A:()=>n});var s=t(95155);t(12115);var a=t(35695);let n=e=>{let{children:r}=e;return(0,a.useRouter)(),(0,s.jsxs)("div",{className:"auth-page-wrapper pt-5",children:[(0,s.jsxs)("div",{className:"auth-one-bg-position auth-one-bg",id:"auth-particles",children:[(0,s.jsx)("div",{className:"bg-overlay"}),(0,s.jsx)("div",{className:"shape",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 1440 120",children:(0,s.jsx)("path",{d:"M 0,36 C 144,53.6 432,123.2 720,124 C 1008,124.8 1296,56.8 1440,40L1440 140L0 140z"})})})]}),r,(0,s.jsx)("footer",{className:"footer start-0",children:(0,s.jsx)("div",{className:"container",children:(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col-lg-12",children:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("p",{className:"mb-0 text-muted",children:["\xa9 ",new Date().getFullYear()," Travho. Crafted with"," ",(0,s.jsx)("i",{className:"mdi mdi-heart text-danger"})," by â€‹TechDesk"]})})})})})})]})}},37073:(e,r,t)=>{"use strict";t.d(r,{u:()=>n});var s=t(12115),a=t(35695);function n(e){let{protect:r=!1,blockIfAuthenticated:t=!1,redirectTo:n="/user/login",redirectIfAuthenticatedTo:o="/dashboard"}=e,l=(0,a.useRouter)();(0,s.useEffect)(()=>{let e=localStorage.getItem("userDetails");r&&!e&&l.replace(n),t&&e&&l.replace(o)},[r,t,n,o,l])}},43015:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let s=t(23464).A.create({baseURL:"https://smartflyservices.travho.net/api",headers:{"Content-Type":"application/json",Accept:"*/*"}});s.interceptors.request.use(e=>{var r;return console.log("[Request] ".concat(null==(r=e.method)?void 0:r.toUpperCase()," ").concat(e.url)),e},e=>(console.error("[Request Error]",e),Promise.reject(e))),s.interceptors.response.use(e=>(console.log("[Response] ".concat(e.status,": ").concat(e.config.url),e.data),e),e=>{if(e.response){let{status:r,config:t,data:s}=e.response;switch(console.error("[Response Error] ".concat(r," - ").concat(t.url),s),r){case 400:console.error("Bad Request");break;case 401:console.error("Unauthorized - Token may be invalid");break;case 500:console.error("Internal Server Error");break;default:console.error("Unhandled API Error")}}else console.error("Network Error:",e.message);return Promise.reject(e)});let a=s},52928:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>v});var s=t(95155),a=t(12115),n=t(35695),o=t(49694),l=t(37129),c=t(6874),i=t.n(c);function d(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)e[s]=t[s]}return e}var u=function e(r,t){function s(e,s,a){if("undefined"!=typeof document){"number"==typeof(a=d({},t,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var n="";for(var o in a)a[o]&&(n+="; "+o,!0!==a[o]&&(n+="="+a[o].split(";")[0]));return document.cookie=e+"="+r.write(s,e)+n}}return Object.create({set:s,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],s={},a=0;a<t.length;a++){var n=t[a].split("="),o=n.slice(1).join("=");try{var l=decodeURIComponent(n[0]);if(s[l]=r.read(o,l),e===l)break}catch(e){}}return e?s[e]:s}},remove:function(e,r){s(e,"",d({},r,{expires:-1}))},withAttributes:function(r){return e(this.converter,d({},this.attributes,r))},withConverter:function(r){return e(d({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(r)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});class m extends Error{}m.prototype.name="InvalidTokenError";var h=t(43015);let p=async e=>(await h.A.post("/UserAuth/login",e)).data;var x=t(69092),g=t(34540),f=t(37073),b=t(29600);let v=()=>{(0,f.u)({blockIfAuthenticated:!0});let e=(0,g.wA)(),r=(0,n.useRouter)(),[t,c]=(0,a.useState)(!1),[d,h]=(0,a.useState)(""),[v,w]=(0,a.useState)(!1),j=(0,o.Wx)({initialValues:{username:"",password:""},validationSchema:l.Ik({username:l.Yj().required("Please enter your username"),password:l.Yj().required("Please enter your password")}),onSubmit:async t=>{c(!0),h("");try{let s=await p(t),a=function(e,r){let t;if("string"!=typeof e)throw new m("Invalid token specified: must be a string");r||(r={});let s=+(!0!==r.header),a=e.split(".")[s];if("string"!=typeof a)throw new m(`Invalid token specified: missing part #${s+1}`);try{t=function(e){let r=e.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw Error("base64 string is not of the correct length")}try{var t;return t=r,decodeURIComponent(atob(t).replace(/(.)/g,(e,r)=>{let t=r.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t="0"+t),"%"+t}))}catch(e){return atob(r)}}(a)}catch(e){throw new m(`Invalid token specified: invalid base64 for part #${s+1} (${e.message})`)}try{return JSON.parse(t)}catch(e){throw new m(`Invalid token specified: invalid json for part #${s+1} (${e.message})`)}}(s.token);u.set("authToken",s.token,{expires:new Date(s.expires),secure:!0,sameSite:"Strict"}),e((0,x.gV)({userID:s.userID,username:s.username,roles:s.roles,email:s.email,category:s.category,companyName:s.companyName}));let n=1e3*a.exp-Date.now();n>0&&setTimeout(()=>{u.remove("authToken"),e((0,x.gV)(null)),r.push("/login")},n),"Admin"===s.roles?r.push("/dashboard"):"Agent"===s.roles?r.push("/agent"):r.push("/dashboard")}catch(e){var s,a;h((null==e||null==(a=e.response)||null==(s=a.data)?void 0:s.message)||"Login failed")}finally{c(!1)}}});return(0,s.jsx)(b.A,{children:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b",children:(0,s.jsxs)("div",{className:"max-w-md w-full p-6 bg-white rounded-lg shadow-lg z-50",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Welcome Back!"}),(0,s.jsx)("p",{className:"text-gray-500 mb-6",children:"Sign in to continue to Travho."})]}),d&&(0,s.jsx)("div",{className:"mb-4 text-red-600 text-sm text-center",children:d}),(0,s.jsxs)("form",{onSubmit:j.handleSubmit,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),(0,s.jsx)("input",{id:"username",name:"username",type:"text",placeholder:"Enter username",className:"mt-1 block w-full px-3 py-2 border ".concat(j.touched.username&&j.errors.username?"border-red-500":"border-gray-300"," rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"),onChange:j.handleChange,onBlur:j.handleBlur,value:j.values.username}),j.touched.username&&j.errors.username&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:j.errors.username})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,s.jsx)(i(),{href:"/forgot-password",className:"text-sm text-blue-600 hover:underline",children:"Forgot password?"})]}),(0,s.jsxs)("div",{className:"relative mt-1",children:[(0,s.jsx)("input",{id:"password",name:"password",type:v?"text":"password",placeholder:"Enter password",className:"block w-full px-3 py-2 border ".concat(j.touched.password&&j.errors.password?"border-red-500":"border-gray-300"," rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 pr-10"),onChange:j.handleChange,onBlur:j.handleBlur,value:j.values.password}),(0,s.jsx)("button",{type:"button",className:"absolute right-3 top-2 text-gray-500",onClick:()=>w(!v),children:(0,s.jsx)("i",{className:"ri-eye-fill"})})]}),j.touched.password&&j.errors.password&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:j.errors.password})]}),(0,s.jsxs)("div",{className:"mb-4 flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"remember",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"remember",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),(0,s.jsxs)("button",{type:"submit",className:"w-full flex justify-center items-center bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:t,children:[t&&(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Sign In"]})]}),(0,s.jsxs)("div",{className:"mt-6 text-center",children:[(0,s.jsx)("h5",{className:"text-sm text-gray-600 mb-3",children:"Sign in with"}),(0,s.jsxs)("div",{className:"flex justify-center space-x-3",children:[(0,s.jsx)(i(),{href:"#",onClick:e=>e.preventDefault(),children:(0,s.jsx)("i",{className:"ri-facebook-fill text-blue-600 text-xl"})}),(0,s.jsx)(i(),{href:"#",onClick:e=>e.preventDefault(),children:(0,s.jsx)("i",{className:"ri-google-fill text-red-500 text-xl"})})]})]}),(0,s.jsxs)("p",{className:"mt-6 text-sm text-center text-gray-600",children:["Don't have an account?"," ",(0,s.jsx)(i(),{href:"/register",className:"text-blue-600 font-medium hover:underline",children:"Signup"})]})]})})})}},69092:(e,r,t)=>{"use strict";t.d(r,{Ay:()=>c,gV:()=>o,lM:()=>l});var s=t(51990);let a={userDetails:(()=>{{let e=localStorage.getItem("userDetails");if(e)try{return JSON.parse(e)}catch(e){console.error("Failed to parse userDetails from localStorage",e)}}return null})()},n=(0,s.Z0)({name:"user",initialState:a,reducers:{setUser:(e,r)=>{e.userDetails=r.payload,r.payload?localStorage.setItem("userDetails",JSON.stringify(r.payload)):localStorage.removeItem("userDetails")},clearUser:e=>{e.userDetails=null,localStorage.removeItem("userDetails")}}}),{setUser:o,clearUser:l}=n.actions,c=n.reducer},69473:(e,r,t)=>{Promise.resolve().then(t.bind(t,52928))}},e=>{var r=r=>e(e.s=r);e.O(0,[635,3486,7931,3464,8441,1684,7358],()=>r(69473)),_N_E=e.O()}]);